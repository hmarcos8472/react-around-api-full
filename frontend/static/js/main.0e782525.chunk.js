(this.webpackJsonparound=this.webpackJsonparound||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/logo.3e6893cd.svg"},23:function(e,t,a){e.exports=a(34)},28:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),i=a.n(r),c=a(8),l=(a(28),a(4)),s=a(1),u=a(2),m=a(18),p=a.n(m);var d=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,o.a.createElement("div",{className:"header"},o.a.createElement("img",{src:p.a,alt:"Around the US",className:"header__logo"}),o.a.createElement("div",{className:e.hidden?"header__menu-container_visible":"header__menu-container"},o.a.createElement("div",{className:e.isHiddenLogoutOpen?"header__menu_close":"header__menu",onClick:e.toggleHiddenLogout})),o.a.createElement("div",{className:e.hidden?"header__text-container_hidden":"header__text-container"},o.a.createElement("p",{className:"header__user"},e.email),o.a.createElement("a",{onClick:e.signOut,href:e.link,className:"header__text"},e.text)))))},_=o.a.createContext();var g=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:e.isHiddenLogoutOpen?"hiddenlogout":"hiddenlogout_closed"},o.a.createElement("p",{className:"hiddenlogout__user"},e.email),o.a.createElement("a",{onClick:e.signOut,href:"/signin",className:"hiddenlogout__text"},"Log out")))};var h=function(e){var t,a=o.a.useContext(_);return o.a.createElement(o.a.Fragment,null,o.a.createElement("main",null,o.a.createElement(g,{email:e.email,signOut:e.signOut,isHiddenLogoutOpen:e.isHiddenLogoutOpen}),o.a.createElement(d,(t={text:"Log out",link:"#",email:e.email},Object(l.a)(t,"link","/signin"),Object(l.a)(t,"signOut",e.signOut),Object(l.a)(t,"isHiddenLogoutOpen",e.isHiddenLogoutOpen),Object(l.a)(t,"toggleHiddenLogout",e.toggleHiddenLogout),Object(l.a)(t,"hidden",!0),t)),o.a.createElement("section",{className:"profile"},o.a.createElement("img",{src:a.avatar,alt:"Avatar",className:"profile__avatar"}),o.a.createElement("div",{onClick:e.onEditAvatar,className:"profile__avatar-overlay"}),o.a.createElement("div",{className:"profile__text-container"},o.a.createElement("p",{className:"profile__name"},a.name),o.a.createElement("p",{className:"profile__occupation"},a.about)),o.a.createElement("button",{onClick:e.onEditProfile,className:"profile__edit",type:"button",name:"button"}),o.a.createElement("button",{onClick:e.onAddCard,className:"profile__add",type:"button",name:"button"})),o.a.createElement("section",{className:"element"},o.a.createElement("ul",{className:"element__container"},e.children))))};var f=function(e){var t=o.a.useContext(_),a=t._id,n=e.card.owner._id===a,r=e.card.likes.some((function(e){return e._id===t._id}));return o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"element__card"},o.a.createElement("div",{onClick:e.onCardImageClick,className:"element__image",style:{backgroundImage:"url(".concat(e.image,")")}}),o.a.createElement("button",{onClick:e.onCardDelete,className:n?"element__trash_visible":"element__trash",type:"button",name:"trash"}),o.a.createElement("div",{className:"element__caption"},o.a.createElement("h2",{className:"element__title"},e.title),o.a.createElement("button",{onClick:e.onCardLike,className:r?"element__heart element__heart_filled":"element__heart element__heart_empty",type:"button",name:"like"},o.a.createElement("p",{className:"element__likes"},e.likecount)))))};var b=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S.")))};var v=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:e.isOpen?"pop-up__container pop-up__container_active":"pop-up__container"},o.a.createElement("section",{className:"pop-up".concat(e.popupType)},o.a.createElement("button",{onClick:e.onClose,className:"pop-up__close"}),o.a.createElement("p",{className:"pop-up__heading".concat(e.popupType)},e.heading),o.a.createElement("form",{onSubmit:e.handleSubmit,className:"pop-up__form",noValidate:!0},e.children,o.a.createElement("button",{onClick:e.onClose,className:"pop-up__save",type:"submit",name:"Save"},e.buttonText)))))};var E=function(e){var t=o.a.useContext(_),a=o.a.useState(t.name),n=Object(s.a)(a,2),r=n[0],i=n[1],c=o.a.useState(t.about),l=Object(s.a)(c,2),u=l[0],m=l[1];return o.a.useEffect((function(){i(t.name),m(t.about)}),[t]),o.a.createElement(v,{heading:"Edit Profile",buttonText:"Save",popupType:"",isOpen:e.isEditOpen,onClose:e.onClose,handleSubmit:function(a){a.preventDefault(),e.onUpdateUser(r,u,t.avatar)}},o.a.createElement("input",{onChange:function(e){i(e.target.value)},id:"profile-name",name:"profile name",minLength:"2",maxLength:"40",required:!0,className:"pop-up__name-input pop-up__input",type:"text",placeholder:"Name"}),o.a.createElement("span",{id:"profile-name-error",className:"pop-up__error pop-up__error_visible"}),o.a.createElement("input",{onChange:function(e){m(e.target.value)},id:"profile-occupation",name:"profile occupation",minLength:"2",maxLength:"40",required:!0,className:"pop-up__occupation-input pop-up__input",type:"text",placeholder:"Occupation"}),o.a.createElement("span",{id:"profile-occupation-error",className:"pop-up__error pop-up__error_visible"}))};var O=function(e){var t=o.a.useContext(_),a=o.a.useState(t.avatar),n=Object(s.a)(a,2),r=n[0],i=n[1],c=o.a.useRef(r);return o.a.createElement(v,{heading:"Change Profile Picture",buttonText:"Save",popupType:"_type_avatar",isOpen:e.isAvatarOpen,onClose:e.onClose,handleSubmit:function(t){t.preventDefault(),e.onUpdateAvatar(r)}},o.a.createElement("input",{ref:c,onChange:function(e){i(c.current.value)},id:"avatar-url",name:"avatar url",type:"url",required:!0,className:"pop-up__url-input pop-up__avatar-input pop-up__input",placeholder:"Avatar URL"}),o.a.createElement("span",{id:"avatar-url-error",className:"pop-up__error pop-up__error_visible"}))};var N=function(e){var t=o.a.useState(""),a=Object(s.a)(t,2),n=a[0],r=a[1],i=o.a.useState(""),c=Object(s.a)(i,2),l=c[0],u=c[1];return o.a.createElement(v,{heading:"New Place",buttonText:"Submit",popupType:"",isOpen:e.isAddOpen,onClose:e.onClose,handleSubmit:function(t){t.preventDefault(),e.onAddPlace({title:n,link:l})}},o.a.createElement("input",{onChange:function(e){r(e.target.value)},id:"image-title",name:"image title",minLength:"1",maxLength:"30",required:!0,className:"pop-up__title-input pop-up__input",type:"text",placeholder:"Title"}),o.a.createElement("span",{id:"image-title-error",className:"pop-up__error pop-up__error_visible"}),o.a.createElement("input",{onChange:function(e){u(e.target.value)},id:"image-url",name:"image url",type:"url",required:!0,className:"pop-up__url-input pop-up__input",placeholder:"Image URL"}),o.a.createElement("span",{id:"image-url-error",className:"pop-up__error pop-up__error_visible"}))};var C=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:e.isOpen?"element__pop-up-container element__pop-up-container_display":"element__pop-up-container"},o.a.createElement("div",{className:"element__pop-up",style:{backgroundImage:"url(".concat(e.image,")")}},o.a.createElement("button",{onClick:e.onClose,type:"button",name:"close",className:"pop-up__close_image"}),o.a.createElement("p",{className:"element__tag"},e.title))))};var y=function(e){var t=o.a.useState(""),a=Object(s.a)(t,2),n=a[0],r=a[1],i=o.a.useState(""),l=Object(s.a)(i,2),m=l[0],p=l[1],d=Object(u.g)();return o.a.createElement("div",{className:"login"},o.a.createElement("h2",{className:"login__heading"},"Log in"),o.a.createElement("form",{className:"login__form",onSubmit:function(t){t.preventDefault(),e.handleLogin(m,n),localStorage.getItem("jwt")&&d.push("/")}},o.a.createElement("input",{onChange:function(e){return r(e.target.value)},className:"login__input",type:"text",name:"email",placeholder:"Email"}),o.a.createElement("input",{onChange:function(e){return p(e.target.value)},className:"login__input",type:"password",name:"password",placeholder:"Password"}),o.a.createElement("button",{className:"login__submit",type:"submit",name:"submit"},"Log in")),o.a.createElement(c.b,{className:"login__help",to:"/signup"},"Not a member yet? Sign up here!"))};var k=function(e){var t=o.a.useState(""),a=Object(s.a)(t,2),n=a[0],r=a[1],i=o.a.useState(""),l=Object(s.a)(i,2),m=l[0],p=l[1],d=Object(u.g)();return o.a.createElement("div",{className:"login"},o.a.createElement("h2",{className:"login__heading"},"Sign up"),o.a.createElement("form",{className:"login__form",onSubmit:function(t){t.preventDefault(),e.handleRegister(m,n),localStorage.getItem("jwt")&&d.push("/")}},o.a.createElement("input",{onChange:function(e){return r(e.target.value)},className:"login__input",type:"text",name:"email",placeholder:"Email"}),o.a.createElement("input",{onChange:function(e){return p(e.target.value)},className:"login__input",type:"password",name:"password",placeholder:"Password"}),o.a.createElement("button",{className:"login__submit",type:"submit",name:"submit"},"Sign up")),o.a.createElement(c.b,{className:"login__help",to:"/signin"},"Already a member? Log in here!"))},j=a(22);var S=function(e){var t=e.component,a=Object(j.a)(e,["component"]);return o.a.createElement(u.b,null,(function(){return a.loggedIn?o.a.createElement(t,a):o.a.createElement(u.a,{to:"/signin"})}))};var L=function(e){return o.a.createElement("div",{className:e.isOpen?"pop-up__container pop-up__container_active":"pop-up__container"},o.a.createElement("section",{className:"pop-up".concat(e.popupType)},o.a.createElement("button",{onClick:e.onClose,className:"pop-up__close"}),o.a.createElement("div",{className:e.isValid?"pop-up__image pop-up__image_success":"pop-up__image pop-up__image_fail"}),o.a.createElement("p",{className:"pop-up__text"},e.isValid?"Success! You have now been registered.":"Oops, something went wrong! Please try again.")))},x=a(20),T=a(21),U=function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))},w=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(x.a)(this,e),this._baseUrl=a,this._headers=n}return Object(T.a)(e,[{key:"getInitialCards",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then(U).catch((function(e){return console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then(U).catch((function(e){return console.log(e)}))}},{key:"addCard",value:function(e){var t=e.title,a=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:a})}).then(U).catch((function(e){return console.log(e)}))}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then(U).catch((function(e){return console.log(e)}))}},{key:"likeCard",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"PUT"}).then(U).catch((function(e){return console.log(e)}))}},{key:"removeLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"DELETE"}).then(U).catch((function(e){return console.log(e)}))}},{key:"setUserInfo",value:function(e){var t=e.name,a=e.about;fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:{authorization:"0822cc1d-2b11-427a-9c40-48a5387f2b93","Content-Type":"application/json"},body:JSON.stringify({name:t,about:a})}).then(U).catch((function(e){return console.log(e)}))}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:{authorization:"0822cc1d-2b11-427a-9c40-48a5387f2b93","Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(U).catch((function(e){return console.log(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"0822cc1d-2b11-427a-9c40-48a5387f2b93","Content-Type":"application/json"}}),A="https://register.nomoreparties.co",P=function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))};var I=function(){var e,t=o.a.useState(!1),a=Object(s.a)(t,2),n=a[0],r=a[1],i=o.a.useState(!1),c=Object(s.a)(i,2),m=c[0],p=c[1],g=o.a.useState(!1),j=Object(s.a)(g,2),x=j[0],T=j[1],U=o.a.useState(!1),I=Object(s.a)(U,2),H=I[0],D=I[1],F=o.a.useState(!1),J=Object(s.a)(F,2),R=J[0],q=J[1],V=o.a.useState(!1),z=Object(s.a)(V,2),Y=z[0],B=z[1],W=o.a.useState(!1),M=Object(s.a)(W,2),$=M[0],G=M[1],K=o.a.useState(""),Q=Object(s.a)(K,2),X=Q[0],Z=Q[1],ee=o.a.useState(""),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],oe=o.a.useState(""),re=Object(s.a)(oe,2),ie=(re[0],re[1]),ce=o.a.useState(""),le=Object(s.a)(ce,2),se=le[0],ue=le[1],me=o.a.useState(!1),pe=Object(s.a)(me,2),de=pe[0],_e=pe[1],ge=o.a.useState(!1),he=Object(s.a)(ge,2),fe=he[0],be=he[1],ve=o.a.useState(""),Ee=Object(s.a)(ve,2),Oe=Ee[0],Ne=Ee[1],Ce=Object(u.g)(),ye=o.a.useState({avatar:"",name:"",about:""}),ke=Object(s.a)(ye,2),je=ke[0],Se=ke[1];function Le(){r(!1),D(!1),p(!1),G(!1),T(!1),q(!1)}o.a.useEffect((function(){w.getUserInfo().then((function(e){Se(e)}))}),[Se]);var xe=o.a.useState([]),Te=Object(s.a)(xe,2),Ue=Te[0],we=Te[1];function Ae(){q(!R)}function Pe(e,t){(function(e,t){return fetch("".concat(A,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(P).catch((function(e){return console.log(e)}))})(e,t).then((function(e){if(!e.data)return _e(!1),void Ae();_e(!0),Ne(t),Ae(),Ce.push("/")})).catch((function(e){return console.log(e)}))}return o.a.useEffect((function(){w.getInitialCards().then((function(e){we(e)}))}),[we,Ue]),o.a.createElement(u.d,null,o.a.createElement(_.Provider,{value:je},o.a.createElement("div",{className:"page"},o.a.createElement("div",{className:n?"overlay overlay_dark":"overlay"},o.a.createElement(L,{isValid:de,isOpen:R,onClose:Le,popupType:"_type_info"}),o.a.createElement(u.b,{path:"/signin"},o.a.createElement(d,{text:"Sign up",link:"/signup",email:fe?se:"",handleRegister:Pe}),o.a.createElement(y,{handleLogin:function(e,t){t&&e&&function(e,t){return fetch("".concat(A,"/signin"),{method:"POST",referrerPolicy:"no-referrer",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(P).catch((function(e){return console.log(e)}))}(e,t).then((function(e){e||(_e(!1),ue(t)),e.token&&(ie(""),_e(!0),be(!0),Ne(t),Ce.push("/"))})).catch((function(e){return console.log(e)}))}})),o.a.createElement(u.b,{path:"/signup"},o.a.createElement(d,{text:"Log in",link:"/signin",email:fe?se:""}),o.a.createElement(k,{handleRegister:Pe,toggleInfoToolTip:Ae})),o.a.createElement(u.b,{path:"/"},fe?o.a.createElement(u.a,{to:"/"}):o.a.createElement(u.a,{to:"/signin"})),o.a.createElement(S,(e={path:"/",loggedIn:fe,component:h,email:Oe},Object(l.a)(e,"loggedIn",fe),Object(l.a)(e,"signOut",(function(){localStorage.removeItem("jwt"),be(!1),ue(""),Ce.push("/signin")})),Object(l.a)(e,"isHiddenLogoutOpen",Y),Object(l.a)(e,"toggleHiddenLogout",(function(){B(!Y)})),Object(l.a)(e,"onEditAvatar",(function(){T(!0),r(!0)})),Object(l.a)(e,"onEditProfile",(function(){p(!0),r(!0)})),Object(l.a)(e,"onAddCard",(function(){D(!0),r(!0)})),Object(l.a)(e,"onCardImageClick",(function(e,t){G(!0),Z(e),ne(t),r(!0)})),e),Ue.map((function(e,t){return o.a.createElement(f,{key:t,card:e,image:e.link,title:e.name,likecount:e.likes.length,onCardLike:function(){!function(e){e.likes.some((function(e){return e._id===je._id}))?w.removeLike(e._id).then((function(t){var a=Ue.map((function(a){return a._id===e._id?t:a}));we(a)})):w.likeCard(e._id).then((function(t){var a=Ue.map((function(a){return a._id===e._id?t:a}));we(a)}))}(e)},onCardDelete:function(){!function(e){w.removeCard(e._id).then(we(Ue))}(e)},onCardImageClick:function(){var t,a;t=e.link,a=e.name,G(!0),Z(t),ne(a),r(!0)}})}))),o.a.createElement(b,null)),o.a.createElement(E,{onUpdateUser:function(e,t){w.setUserInfo({name:je.name,about:je.about}),Se({name:e,about:t,avatar:je.avatar})},isEditOpen:m,onClose:Le}),o.a.createElement(O,{onUpdateAvatar:function(e){w.setUserAvatar({avatar:je.avatar}),Se({name:je.name,about:je.about,avatar:e})},isAvatarOpen:x,onClose:Le}),o.a.createElement(N,{onAddPlace:function(e){w.addCard(e)},isAddOpen:H,onClose:Le}),o.a.createElement(v,{heading:"Are You Sure?",buttonText:"Yes",popupType:"_type_delete"}),o.a.createElement(C,{isOpen:$,title:ae,image:X,onClose:function(){G(!1),r(!1)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(c.a,null,o.a.createElement(I,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.0e782525.chunk.js.map